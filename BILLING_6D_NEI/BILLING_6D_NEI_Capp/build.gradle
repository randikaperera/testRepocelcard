/*
 * This file was generated by the Gradle 'init' task.
 */

dependencies {
    compile 'www.cellcard.com.kh.BILLING_6D_NEI_Registry.resource:EP_6D_BILLING:1.0.0'
    compile 'www.cellcard.com.kh.BILLING_6D_NEI_Config.api:6D_BILLING_API:1.0.0'
    compile 'www.cellcard.com.kh.BILLING_6D_NEI_Config.sequence:NE_BillingNeiSeq:1.0.0'
    compile 'www.cellcard.com.kh.BILLING_6D_NEI_Registry.resource:6D_BILLING_FAULT:1.0.0'
    compile 'www.cellcard.com.kh.BILLING_6D_NEI_Registry.resource:EP_6D_BILLING_LB:1.0.0'
    compile 'www.cellcard.com.kh.BILLING_6D_NEI_Config.proxy-service:proxyBilling:1.0.0'
}

group = 'www.cellcard.com.BILLING_6D_NEI_Capp'
description = 'BILLING_6D_NEI_Capp'

task deployLocal(type:Exec) {
	commandLine 'mvn', 'org.wso2.maven:maven-car-deploy-plugin:deploy-car', '-Pdeploy-local', "-s../settings.xml"
}

task deployRemote(type:Exec) {
    def username = System.getenv('USERNAME');
    def password = System.getenv('PASSWORD');
    def eiServer = System.getenv('EI_SERVER_HOST');
	def command =['mvn', 'org.wso2.maven:maven-car-deploy-plugin:deploy-car', '-Pdeploy-remote', "-s../settings.xml", "-Desb-server-username="+username, "-Desb-server-password="+password, "-Desb-server-url="+eiServer]
    commandLine command
}

task deployToArtifactory(type:Exec) {
    def username = System.getenv('JFROG_USERNAME');
    def password = System.getenv('JFROG_PASSWORD');
    def artifactoryUrl = System.getenv('ARTIFACTORY_URL');
	def command = [ 'mvn',  'deploy', '-Pdeploy-artifactory', "-s../settings.xml" ,"-Dartifactory-username="+username, "-Dartifactory-password="+password, "-Dartifactory-url="+artifactoryUrl]
    commandLine command
}

task releaseVersion(type:Exec){
	def env = System.getenv();
	def username = System.getenv('GIT_USERNAME');
	def password = System.getenv('GIT_PASSWORD');
	commandLine 'mvn', 'release:prepare', 'release:perform'
}